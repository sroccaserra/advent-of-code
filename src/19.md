### Questions

Q.01 Est-ce que résoudre le pb en 1D est généralisable en 2D puis 3D ? Pourquoi
?

Q.02 Est-ce que résoudre le pb en x, y, z indépendamment permet de résoudre le
problème complet ? Pourquoi ?

Q.03 Est-ce que les différences entre points sont plus intéressantes que la
position par rapport au scanner ?


Q.04 Est-ce que pour une comparaison de scanner donnés, je peux éliminer des
points ou au moins tirer des conclusions ?

### État des lieux

J'ai 1007 points dans l'entrée, répartis dans 39 scanners. Chaque scanner
contient entre 25 et 27 points.

Combinatoire : pour choisir 2 scanners parmi 39, j'ai 741 possibilités,
`39!/(2!*(39-2)!) = 741`

Pour chaque combinaison de scanner, je dois faire au plus 24 essais, ce qui
fait que je dois comparer les 25-27 points 24 fois.

`24*741 = 17784` comparaison de scanners, `462384` comparaisons de points.

Si je veux éviter de recalculer les transformations à chaque fois, je peux
stocker les `24*1007 = 24168` points, soit `72504` valeurs, ça doit aller.

#### Références

- <https://en.wikipedia.org/wiki/Rotation_matrix>
- <https://en.wikipedia.org/wiki/Matrix_multiplication>

### Hypothèses

H.01 Il doit y avoir des points qui sont vus par plusieurs scanners, rien dans
l'énoncé que je n'ai pas lu en entier n'indique le contraire (?)

### Todo

Comment combiner les scanners pour reconsituer la carte, ou au moins supprimer
les doublons ?

Je peux partir arbitrairement du premier scanner, et lister ses points dans un
ensemble de points connus, et décréter que ce scanner est aligné.

Ensuite, je prend le reste des scanners, et :
- pour chaque scanner non encore aligné,
    - pour chaque transformation,
        - si je trouve 12 points allignés,
            - je retiens cette transformation et je la range dans la liste des
              scanners alignés, et dans la liste des scanners à visiter
            - je marque ce scanner comme aligné
            ...

Pour savoir si un scanner est aligné avec un autre,
- pour chaque transformation
    - je transforme tous les points de l'autre
    - je détermine un dx, dy, dz arbitraire
    - pour chaque point transformé de l'autre
        - si il existe dans le scanner initial
            - j'incrémente un compteur
            - si ce compteur est égal à 12
                - je renvoie les points transformés

Essayer de mémoiser les points transformer ?

#### Problèmes

Est-ce qu'il y a une translation à faire ? Si oui, comment est-ce que je
détermine que 12 points correspondent ? Par ex, que 12 parmis n sont à une
distance constante (comment) ? Calculer toutes les distances entre tous les points ? Autre ?

Si je devais le faire en 1D : j'ai deux ensemble de 5 valeurs, dont 3 sont à
égale distance les uns des autres.

[1, 2, 3, 5, 8]
[0, 7, 8, 25, 13] Si je fais une translation de -5, j'obtiens [-5, 2, 3, 20,
8], j'ai mes trois correspondances.


### Done

Quelles sont les 24 (23) transformations à effectuer ?

> In total, each scanner could be in any of 24 different orientations: facing
> positive or negative x, y, or z, and considering any of four directions "up"
> from that facing.

#### Pour x bien aligné

T.01 Un point vu en (1, 2, 3) par le scanner, si les x du scanner sont orienté
suivant les x positifs, et que les y positif sont le "haut" du scanner, sera
bien en (1, 2, 3).

T.02 Un point vu en (1, 2, 3) par le scanner, si les x du scanner sont orienté
suivant les x positifs, et que les y négatifs sont le "haut" du scanner, sera
à transformer en (1, -2, -3).

T.03 Un point vu en (1, 2, 3) par le scanner, si les x du scanner sont orienté
suivant les x positifs, et que les z positifs sont le "haut" du scanner, sera
à transformer en (1, -3, 2).

T.04 Un point vu en (1, 2, 3) par le scanner, si les x du scanner sont orienté
suivant les x positifs, et que les z négatifs sont le "haut" du scanner, sera
à transformer en (1, 3, -2).

#### Pour x inversé

T.05 Un point vu en (1, 2, 3) par le scanner, si les x du scanner sont orienté
suivant les x négatifs, et que les y positif sont le "haut" du scanner, sera
bien en (-1, 2, -3).

T.06 Un point vu en (1, 2, 3) par le scanner, si les x du scanner sont orienté
suivant les x négatifs, et que les y négatifs sont le "haut" du scanner, sera
à transformer en (-1, -2, 3).

T.07 Un point vu en (1, 2, 3) par le scanner, si les x du scanner sont orienté
suivant les x négatifs, et que les z positifs sont le "haut" du scanner, sera
à transformer en (-1, 3, 2).

T.08 Un point vu en (1, 2, 3) par le scanner, si les x du scanner sont orienté
suivant les x négatifs, et que les z négatifs sont le "haut" du scanner, sera
à transformer en (-1, -3, -2).

### Synthèse si x --> x ou x --> -x

(1, 2, 3) devient :

- ( 1,  2,  3)
- ( 1, -2, -3)
- ( 1, -3,  2)
- ( 1,  3, -2)

- (-1,  2, -3)
- (-1, -2,  3)
- (-1,  3,  2)
- (-1, -3, -2)

On observe qu'il n'y a pas de (1, -2, 3) par exemple, sans doute parce-que le
référentiel reste direct, on reste sur des rotations.


### Synthèse si x --> y ou x --> -y

(1, 2, 3) devient :

- ( 2,  1, -3)
- (-2,  1,  3)
- ( 3,  1,  2)
- (-3,  1, -2)

- ( 2, -1,  3)
- (-2, -1, -3)
- (-3, -1,  2)
- ( 3, -1, -2)


### Synthèse si x --> z ou x --> -z

(1, 2, 3) devient :

- (-3,  2,  1)
- ( 3, -2,  1)
- ( 2,  3,  1)
- (-2, -3,  1)

- ( 3,  2, -1)
- (-3, -2, -1)
- ( 2, -3, -1)
- (-2,  3, -1)

